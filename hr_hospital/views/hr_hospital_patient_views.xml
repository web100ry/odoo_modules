<odoo>

  <record id="view_hr_hospital_patient_list" model="ir.ui.view">
    <field name="name">hr.hospital.patient.list</field>
    <field name="model">hr.hospital.patient</field>
    <field name="arch" type="xml">
      <list string="Patients">
        <field name="fullname"/>
        <field name="birth_date"/>
        <field name="age"/>
        <field name="gender"/>
        <field name="phone"/>
        <field name="email"/>
        <field name="personal_doctor_id"/>
        <field name="blood_type"/>
        <field name="insurance_company_id"/>
        <field name="insurance_policy_number"/>
      </list>
    </field>
  </record>

  <record id="view_hr_hospital_patient_form" model="ir.ui.view">
    <field name="name">hr.hospital.patient.form</field>
    <field name="model">hr.hospital.patient</field>
    <field name="arch" type="xml">
      <form>
        <header>
          <button name="action_view_visits" type="object" string="Visit History" class="oe_highlight"/>
        </header>
        <sheet>
          <div class="oe_button_box" name="button_box">
            <button name="action_view_visits" type="object" class="oe_stat_button" icon="fa-calendar">
              <field name="visit_count" widget="statinfo" string="Visits"/>
            </button>
          </div>
          <group>
            <group>
              <field name="last_name"/>
              <field name="first_name"/>
              <field name="middle_name"/>
              <field name="fullname" readonly="1"/>
              <field name="birth_date"/>
              <field name="age" readonly="1"/>
              <field name="gender"/>
              <field name="blood_type"/>
              <field name="allergies"/>
              <field name="passport_data"/>
            </group>

            <group>
              <field name="country_id"/>
              <field name="lang_id"/>
              <field name="phone"/>
              <field name="email"/>
              <field name="contact_person_id"/>
              <field name="personal_doctor_id"/>
              <field name="insurance_company_id"/>
              <field name="insurance_policy_number"/>
              <field name="disease_id"/>
              <field name="doctor_id"/>
            </group>
          </group>

          <notebook>
            <page string="Doctor History">
              <field name="doctor_history_ids">
                <list editable="bottom">
                  <field name="doctor_id"/>
                  <field name="assign_date"/>
                  <field name="change_date"/>
                  <field name="reason_change"/>
                  <field name="active"/>
                </list>
              </field>
            </page>
            <page string="Patient Visits">
              <field name="visit_ids" context="{'default_patient_id': id}"/>
            </page>
          </notebook>

        </sheet>
      </form>
    </field>
  </record>

  <record id="view_hr_hospital_patient_search" model="ir.ui.view">
    <field name="name">hr.hospital.patient.search</field>
    <field name="model">hr.hospital.patient</field>
    <field name="arch" type="xml">
      <search>
        <field name="fullname" string="Full Name" filter_domain="['|', '|', ('last_name', 'ilike', self), ('first_name', 'ilike', self), ('middle_name', 'ilike', self)]"/>
        <field name="phone" string="Phone"/>
        <field name="email"/>
        <field name="personal_doctor_id"/>
        <field name="insurance_company_id"/>
        <separator/>
        <filter string="Male" name="filter_male" domain="[('gender', '=', 'male')]"/>
        <filter string="Female" name="filter_female" domain="[('gender', '=', 'female')]"/>
        <filter string="Other" name="filter_other" domain="[('gender', '=', 'other')]"/>
        <separator/>
        <filter string="With Personal Doctor" name="filter_has_doctor" domain="[('personal_doctor_id', '!=', False)]"/>
        <filter string="Without Personal Doctor" name="filter_no_doctor" domain="[('personal_doctor_id', '=', False)]"/>
        <separator/>
        <group expand="0" string="Group By">
          <filter string="Gender" name="group_by_gender" context="{'group_by': 'gender'}"/>
          <filter string="Blood Type" name="group_by_blood_type" context="{'group_by': 'blood_type'}"/>
          <filter string="Personal Doctor" name="group_by_doctor" context="{'group_by': 'personal_doctor_id'}"/>
          <filter string="Insurance Company" name="group_by_insurance" context="{'group_by': 'insurance_company_id'}"/>
        </group>
      </search>
    </field>
  </record>

  <record id="action_hr_hospital_patient" model="ir.actions.act_window">
    <field name="name">Patients</field>
    <field name="type">ir.actions.act_window</field>
    <field name="res_model">hr.hospital.patient</field>
    <field name="view_mode">list,form</field>
  </record>

</odoo>
