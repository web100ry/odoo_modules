<?xml version="1.0" encoding="UTF-8"?>
<odoo>

    <!-- ========================= -->
    <!-- Security Category         -->
    <!-- ========================= -->
    <record id="module_category_caritas_fleet" model="ir.module.category">
        <field name="name">Caritas Fleet</field>
        <field name="description">Fleet and vehicle request management</field>
        <field name="sequence">25</field>
    </record>

    <!-- ========================= -->
    <!-- Fleet User                -->
    <!-- ========================= -->
    <record id="group_fleet_user" model="res.groups">
        <field name="name">Fleet User</field>
        <field name="category_id" ref="module_category_caritas_fleet"/>
    </record>

    <!-- ========================= -->
    <!-- Fleet Driver              -->
    <!-- ========================= -->
    <record id="group_fleet_driver" model="res.groups">
        <field name="name">Fleet Driver</field>
        <field name="category_id" ref="module_category_caritas_fleet"/>
        <field name="implied_ids" eval="[(4, ref('group_fleet_user'))]"/>
    </record>

    <!-- ========================= -->
    <!-- Fleet Admin               -->
    <!-- ========================= -->
    <record id="group_fleet_admin" model="res.groups">
        <field name="name">Fleet Admin</field>
        <field name="category_id" ref="module_category_caritas_fleet"/>
        <field name="implied_ids" eval="[(4, ref('group_fleet_user'))]"/>
    </record>

    <record id="vehicle_request_rule_driver" model="ir.rule">
        <field name="name">Vehicle Requests for Driver</field>
        <field name="model_id" ref="caritas_fleet_request.model_vehicle_request"/>
        <field name="groups" eval="[(4, ref('caritas_fleet_request.group_fleet_driver'))]"/>
        <field name="domain_force">['|', ('requester_id', '=', user.id), '&amp;', ('driver_id', '=', user.id), ('state', 'in', ['approved', 'in_progress', 'done', 'closed'])]</field>
    </record>

</odoo>